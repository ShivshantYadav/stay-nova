{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import Tabs from'components/ux/tabs/Tabs';import TabPanel from'components/ux/tab-panel/TabPanel';import{faAddressCard,faHotel,faCreditCard}from'@fortawesome/free-solid-svg-icons';import{AuthContext}from'contexts/AuthContext';import{networkAdapter}from'services/NetworkAdapter';import{useContext}from'react';import PaymentMethodsPanel from'./components/PaymentsMethodsPanel';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faBars}from'@fortawesome/free-solid-svg-icons';import{faXmark}from'@fortawesome/free-solid-svg-icons';import useOutsideClickHandler from'hooks/useOutsideClickHandler';import{useNavigate}from'react-router-dom';import BookingPanel from'./components/BookingPanel';import ProfileDetailsPanel from'./components/ProfileDetailsPanel';/**\n * UserProfile\n * Renders the user profile page with tabs for personal details, bookings, and payment methods.\n * @returns {JSX.Element} - The UserProfile component\n * */import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const UserProfile=()=>{const{userDetails}=useContext(AuthContext);const navigate=useNavigate();const wrapperRef=useRef();const buttonRef=useRef();const[isTabsVisible,setIsTabsVisible]=useState(false);// Fetch user bookings data\nconst[userBookingsData,setUserBookingsData]=useState({isLoading:true,data:[],errors:[]});// Fetch user payment methods data\nconst[userPaymentMethodsData,setUserPaymentMethodsData]=useState({isLoading:true,data:[],errors:[]});useOutsideClickHandler(wrapperRef,event=>{if(!buttonRef.current.contains(event.target)){setIsTabsVisible(false);}});const onTabsMenuButtonAction=()=>{setIsTabsVisible(!isTabsVisible);};// effect to set initial state of user details\nuseEffect(()=>{if(!userDetails){navigate('/login');}},[navigate,userDetails]);// effect to set initial state of user bookings data\nuseEffect(()=>{const getInitialData=async()=>{const userBookingsDataResponse=await networkAdapter.get('/api/users/bookings');const userPaymentMethodsResponse=await networkAdapter.get('api/users/payment-methods');if(userBookingsDataResponse&&userBookingsDataResponse.data){setUserBookingsData({isLoading:false,data:userBookingsDataResponse.data.elements,errors:userBookingsDataResponse.errors});}if(userPaymentMethodsResponse&&userPaymentMethodsResponse.data){setUserPaymentMethodsData({isLoading:false,data:userPaymentMethodsResponse.data.elements,errors:userPaymentMethodsResponse.errors});}};getInitialData();},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-4 my-10 min-h-[530px]\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-4\",children:/*#__PURE__*/_jsx(\"button\",{ref:buttonRef,onClick:onTabsMenuButtonAction,className:\"block md:hidden items-center px-4 py-1.5 border border-gray-300 font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:isTabsVisible?faXmark:faBars,size:\"lg\"})})}),/*#__PURE__*/_jsxs(Tabs,{isTabsVisible:isTabsVisible,wrapperRef:wrapperRef,children:[/*#__PURE__*/_jsx(TabPanel,{label:\"Personal Details\",icon:faAddressCard,children:/*#__PURE__*/_jsx(ProfileDetailsPanel,{userDetails:userDetails})}),/*#__PURE__*/_jsx(TabPanel,{label:\"Bookings\",icon:faHotel,children:/*#__PURE__*/_jsx(BookingPanel,{bookings:userBookingsData.data})}),/*#__PURE__*/_jsx(TabPanel,{label:\"Payment details\",icon:faCreditCard,children:/*#__PURE__*/_jsx(PaymentMethodsPanel,{userPaymentMethodsData:userPaymentMethodsData,setUserPaymentMethodsData:setUserPaymentMethodsData})})]})]})});};export default UserProfile;","map":{"version":3,"names":["React","useState","useEffect","useRef","Tabs","TabPanel","faAddressCard","faHotel","faCreditCard","AuthContext","networkAdapter","useContext","PaymentMethodsPanel","FontAwesomeIcon","faBars","faXmark","useOutsideClickHandler","useNavigate","BookingPanel","ProfileDetailsPanel","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserProfile","userDetails","navigate","wrapperRef","buttonRef","isTabsVisible","setIsTabsVisible","userBookingsData","setUserBookingsData","isLoading","data","errors","userPaymentMethodsData","setUserPaymentMethodsData","event","current","contains","target","onTabsMenuButtonAction","getInitialData","userBookingsDataResponse","get","userPaymentMethodsResponse","elements","children","className","ref","onClick","icon","size","label","bookings"],"sources":["E:/STAY-NOVA/stay-nova/src/routes/user-profile/UserProfile.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport Tabs from 'components/ux/tabs/Tabs';\nimport TabPanel from 'components/ux/tab-panel/TabPanel';\nimport {\n  faAddressCard,\n  faHotel,\n  faCreditCard,\n} from '@fortawesome/free-solid-svg-icons';\nimport { AuthContext } from 'contexts/AuthContext';\nimport { networkAdapter } from 'services/NetworkAdapter';\nimport { useContext } from 'react';\nimport PaymentMethodsPanel from './components/PaymentsMethodsPanel';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBars } from '@fortawesome/free-solid-svg-icons';\nimport { faXmark } from '@fortawesome/free-solid-svg-icons';\nimport useOutsideClickHandler from 'hooks/useOutsideClickHandler';\nimport { useNavigate } from 'react-router-dom';\nimport BookingPanel from './components/BookingPanel';\nimport ProfileDetailsPanel from './components/ProfileDetailsPanel';\n\n/**\n * UserProfile\n * Renders the user profile page with tabs for personal details, bookings, and payment methods.\n * @returns {JSX.Element} - The UserProfile component\n * */\nconst UserProfile = () => {\n  const { userDetails } = useContext(AuthContext);\n  const navigate = useNavigate();\n\n  const wrapperRef = useRef();\n  const buttonRef = useRef();\n\n  const [isTabsVisible, setIsTabsVisible] = useState(false);\n\n  // Fetch user bookings data\n  const [userBookingsData, setUserBookingsData] = useState({\n    isLoading: true,\n    data: [],\n    errors: [],\n  });\n\n  // Fetch user payment methods data\n  const [userPaymentMethodsData, setUserPaymentMethodsData] = useState({\n    isLoading: true,\n    data: [],\n    errors: [],\n  });\n\n  useOutsideClickHandler(wrapperRef, (event) => {\n    if (!buttonRef.current.contains(event.target)) {\n      setIsTabsVisible(false);\n    }\n  });\n\n  const onTabsMenuButtonAction = () => {\n    setIsTabsVisible(!isTabsVisible);\n  };\n\n  // effect to set initial state of user details\n  useEffect(() => {\n    if (!userDetails) {\n      navigate('/login');\n    }\n  }, [navigate, userDetails]);\n\n  // effect to set initial state of user bookings data\n  useEffect(() => {\n    const getInitialData = async () => {\n      const userBookingsDataResponse = await networkAdapter.get(\n        '/api/users/bookings'\n      );\n      const userPaymentMethodsResponse = await networkAdapter.get(\n        'api/users/payment-methods'\n      );\n      if (userBookingsDataResponse && userBookingsDataResponse.data) {\n        setUserBookingsData({\n          isLoading: false,\n          data: userBookingsDataResponse.data.elements,\n          errors: userBookingsDataResponse.errors,\n        });\n      }\n      if (userPaymentMethodsResponse && userPaymentMethodsResponse.data) {\n        setUserPaymentMethodsData({\n          isLoading: false,\n          data: userPaymentMethodsResponse.data.elements,\n          errors: userPaymentMethodsResponse.errors,\n        });\n      }\n    };\n    getInitialData();\n  }, []);\n\n  return (\n    <>\n      <div className=\"container mx-auto p-4 my-10 min-h-[530px]\">\n        <div className=\"mx-4\">\n          <button\n            ref={buttonRef}\n            onClick={onTabsMenuButtonAction}\n            className=\"block md:hidden items-center px-4 py-1.5 border border-gray-300 font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n          >\n            <FontAwesomeIcon\n              icon={isTabsVisible ? faXmark : faBars}\n              size=\"lg\"\n            />\n          </button>\n        </div>\n        <Tabs isTabsVisible={isTabsVisible} wrapperRef={wrapperRef}>\n          <TabPanel label=\"Personal Details\" icon={faAddressCard}>\n            <ProfileDetailsPanel userDetails={userDetails} />\n          </TabPanel>\n          <TabPanel label=\"Bookings\" icon={faHotel}>\n            <BookingPanel bookings={userBookingsData.data} />\n          </TabPanel>\n          <TabPanel label=\"Payment details\" icon={faCreditCard}>\n            <PaymentMethodsPanel\n              userPaymentMethodsData={userPaymentMethodsData}\n              setUserPaymentMethodsData={setUserPaymentMethodsData}\n            />\n          </TabPanel>\n        </Tabs>\n      </div>\n    </>\n  );\n};\n\nexport default UserProfile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}