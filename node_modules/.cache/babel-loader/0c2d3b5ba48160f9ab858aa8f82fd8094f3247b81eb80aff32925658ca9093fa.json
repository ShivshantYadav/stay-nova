{"ast":null,"code":"import Review from'./components/Review';import React,{useState}from'react';import RatingsOverview from'./components/RatingsOverview';import UserRatingsSelector from'./components/UserRatingsSelector';import{networkAdapter}from'services/NetworkAdapter';import Toast from'components/ux/toast/Toast';import PaginationController from'components/ux/pagination-controller/PaginationController';import Loader from'components/ux/loader/loader';/**\n * Renders the user reviews component.\n *\n * @component\n * @param {Object} reviewData - The review data object.\n * @returns {JSX.Element} The user reviews component.\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserReviews=_ref=>{let{reviewData,handlePageChange,handlePreviousPageChange,handleNextPageChange}=_ref;const[userRating,setUserRating]=useState(0);const[userReview,setUserReview]=useState('');const[shouldHideUserRatingsSelector,setShouldHideUserRatingsSelector]=useState(false);const[toastMessage,setToastMessage]=useState('');/**\n   * Handles the selected user rating.\n   * @param {number} rate - The rating value.\n   */const handleRating=rate=>{setUserRating(rate);};const clearToastMessage=()=>{setToastMessage('');};const handleReviewSubmit=async()=>{if(userRating===0){setToastMessage({type:'error',message:'Please select a rating before submitting.'});return;}// TODO: Add validation for userRating and userReview\nconst response=await networkAdapter.put('/api/hotel/add-review',{rating:userRating,review:userReview});if(response&&response.errors.length===0&&response.data.status){setToastMessage({type:'success',message:response.data.status});}else{setToastMessage({type:'error',message:'Review submission failed'});}setShouldHideUserRatingsSelector(true);};const handleUserReviewChange=review=>{setUserReview(review);};const isEmpty=reviewData.data.length===0;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col p-4 border-t\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-gray-700\",children:\"User Reviews\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row py-4 bg-white shadow-sm gap-6\",children:[reviewData.data.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"w-3/5\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 italic\",children:\"Be the first to leave a review!\"})}):/*#__PURE__*/_jsx(RatingsOverview,{averageRating:reviewData.metadata.averageRating,ratingsCount:reviewData.metadata.totalReviews,starCounts:reviewData.metadata.starCounts}),shouldHideUserRatingsSelector?null:/*#__PURE__*/_jsx(UserRatingsSelector,{userRating:userRating,isEmpty:isEmpty,handleRating:handleRating,userReview:userReview,handleReviewSubmit:handleReviewSubmit,handleUserReviewChange:handleUserReviewChange})]}),toastMessage&&/*#__PURE__*/_jsx(Toast,{type:toastMessage.type,message:toastMessage.message,dismissError:clearToastMessage}),/*#__PURE__*/_jsx(\"div\",{children:reviewData.isLoading?/*#__PURE__*/_jsx(Loader,{height:'600px'}):/*#__PURE__*/_jsx(\"div\",{children:reviewData.data.map((review,index)=>/*#__PURE__*/_jsx(Review,{reviewerName:review.reviewerName,reviewDate:review.date,review:review.review,rating:review.rating,verified:review.verified},index))})}),reviewData.data.length>0&&/*#__PURE__*/_jsx(PaginationController,{currentPage:reviewData.pagination.currentPage,totalPages:reviewData.pagination.totalPages,handlePageChange:handlePageChange,handlePreviousPageChange:handlePreviousPageChange,handleNextPageChange:handleNextPageChange})]});};export default UserReviews;","map":{"version":3,"names":["Review","React","useState","RatingsOverview","UserRatingsSelector","networkAdapter","Toast","PaginationController","Loader","jsx","_jsx","jsxs","_jsxs","UserReviews","_ref","reviewData","handlePageChange","handlePreviousPageChange","handleNextPageChange","userRating","setUserRating","userReview","setUserReview","shouldHideUserRatingsSelector","setShouldHideUserRatingsSelector","toastMessage","setToastMessage","handleRating","rate","clearToastMessage","handleReviewSubmit","type","message","response","put","rating","review","errors","length","data","status","handleUserReviewChange","isEmpty","className","children","averageRating","metadata","ratingsCount","totalReviews","starCounts","dismissError","isLoading","height","map","index","reviewerName","reviewDate","date","verified","currentPage","pagination","totalPages"],"sources":["E:/STAY-NOVA/stay-nova/src/routes/hotel-details/components/user-reviews/UserReviews.jsx"],"sourcesContent":["import Review from './components/Review';\nimport React, { useState } from 'react';\nimport RatingsOverview from './components/RatingsOverview';\nimport UserRatingsSelector from './components/UserRatingsSelector';\nimport { networkAdapter } from 'services/NetworkAdapter';\nimport Toast from 'components/ux/toast/Toast';\nimport PaginationController from 'components/ux/pagination-controller/PaginationController';\nimport Loader from 'components/ux/loader/loader';\n\n/**\n * Renders the user reviews component.\n *\n * @component\n * @param {Object} reviewData - The review data object.\n * @returns {JSX.Element} The user reviews component.\n */\nconst UserReviews = ({\n  reviewData,\n  handlePageChange,\n  handlePreviousPageChange,\n  handleNextPageChange,\n}) => {\n  const [userRating, setUserRating] = useState(0);\n\n  const [userReview, setUserReview] = useState('');\n\n  const [shouldHideUserRatingsSelector, setShouldHideUserRatingsSelector] =\n    useState(false);\n\n  const [toastMessage, setToastMessage] = useState('');\n\n  /**\n   * Handles the selected user rating.\n   * @param {number} rate - The rating value.\n   */\n  const handleRating = (rate) => {\n    setUserRating(rate);\n  };\n\n  const clearToastMessage = () => {\n    setToastMessage('');\n  };\n\n  const handleReviewSubmit = async () => {\n    if (userRating === 0) {\n      setToastMessage({\n        type: 'error',\n        message: 'Please select a rating before submitting.',\n      });\n      return;\n    }\n    // TODO: Add validation for userRating and userReview\n    const response = await networkAdapter.put('/api/hotel/add-review', {\n      rating: userRating,\n      review: userReview,\n    });\n    if (response && response.errors.length === 0 && response.data.status) {\n      setToastMessage({\n        type: 'success',\n        message: response.data.status,\n      });\n    } else {\n      setToastMessage({\n        type: 'error',\n        message: 'Review submission failed',\n      });\n    }\n    setShouldHideUserRatingsSelector(true);\n  };\n\n  const handleUserReviewChange = (review) => {\n    setUserReview(review);\n  };\n\n  const isEmpty = reviewData.data.length === 0;\n\n  return (\n    <div className=\"flex flex-col p-4 border-t\">\n      <h1 className=\"text-xl font-bold text-gray-700\">User Reviews</h1>\n      <div className=\"flex flex-col md:flex-row py-4 bg-white shadow-sm gap-6\">\n        {reviewData.data.length === 0 ? (\n          <div className=\"w-3/5\">\n            <span className=\"text-gray-500 italic\">\n              Be the first to leave a review!\n            </span>\n          </div>\n        ) : (\n          <RatingsOverview\n            averageRating={reviewData.metadata.averageRating}\n            ratingsCount={reviewData.metadata.totalReviews}\n            starCounts={reviewData.metadata.starCounts}\n          />\n        )}\n        {shouldHideUserRatingsSelector ? null : (\n          <UserRatingsSelector\n            userRating={userRating}\n            isEmpty={isEmpty}\n            handleRating={handleRating}\n            userReview={userReview}\n            handleReviewSubmit={handleReviewSubmit}\n            handleUserReviewChange={handleUserReviewChange}\n          />\n        )}\n      </div>\n      {toastMessage && (\n        <Toast\n          type={toastMessage.type}\n          message={toastMessage.message}\n          dismissError={clearToastMessage}\n        />\n      )}\n      <div>\n        {reviewData.isLoading ? (\n          <Loader height={'600px'} />\n        ) : (\n          <div>\n            {reviewData.data.map((review, index) => (\n              <Review\n                key={index}\n                reviewerName={review.reviewerName}\n                reviewDate={review.date}\n                review={review.review}\n                rating={review.rating}\n                verified={review.verified}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n      {reviewData.data.length > 0 && (\n        <PaginationController\n          currentPage={reviewData.pagination.currentPage}\n          totalPages={reviewData.pagination.totalPages}\n          handlePageChange={handlePageChange}\n          handlePreviousPageChange={handlePreviousPageChange}\n          handleNextPageChange={handleNextPageChange}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default UserReviews;\n"],"mappings":"AAAA,MAAO,CAAAA,MAAM,KAAM,qBAAqB,CACxC,MAAO,CAAAC,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,eAAe,KAAM,8BAA8B,CAC1D,MAAO,CAAAC,mBAAmB,KAAM,kCAAkC,CAClE,OAASC,cAAc,KAAQ,yBAAyB,CACxD,MAAO,CAAAC,KAAK,KAAM,2BAA2B,CAC7C,MAAO,CAAAC,oBAAoB,KAAM,0DAA0D,CAC3F,MAAO,CAAAC,MAAM,KAAM,6BAA6B,CAEhD;AACA;AACA;AACA;AACA;AACA;AACA,GANA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAOA,KAAM,CAAAC,WAAW,CAAGC,IAAA,EAKd,IALe,CACnBC,UAAU,CACVC,gBAAgB,CAChBC,wBAAwB,CACxBC,oBACF,CAAC,CAAAJ,IAAA,CACC,KAAM,CAACK,UAAU,CAAEC,aAAa,CAAC,CAAGlB,QAAQ,CAAC,CAAC,CAAC,CAE/C,KAAM,CAACmB,UAAU,CAAEC,aAAa,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CAEhD,KAAM,CAACqB,6BAA6B,CAAEC,gCAAgC,CAAC,CACrEtB,QAAQ,CAAC,KAAK,CAAC,CAEjB,KAAM,CAACuB,YAAY,CAAEC,eAAe,CAAC,CAAGxB,QAAQ,CAAC,EAAE,CAAC,CAEpD;AACF;AACA;AACA,KACE,KAAM,CAAAyB,YAAY,CAAIC,IAAI,EAAK,CAC7BR,aAAa,CAACQ,IAAI,CAAC,CACrB,CAAC,CAED,KAAM,CAAAC,iBAAiB,CAAGA,CAAA,GAAM,CAC9BH,eAAe,CAAC,EAAE,CAAC,CACrB,CAAC,CAED,KAAM,CAAAI,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACrC,GAAIX,UAAU,GAAK,CAAC,CAAE,CACpBO,eAAe,CAAC,CACdK,IAAI,CAAE,OAAO,CACbC,OAAO,CAAE,2CACX,CAAC,CAAC,CACF,OACF,CACA;AACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAA5B,cAAc,CAAC6B,GAAG,CAAC,uBAAuB,CAAE,CACjEC,MAAM,CAAEhB,UAAU,CAClBiB,MAAM,CAAEf,UACV,CAAC,CAAC,CACF,GAAIY,QAAQ,EAAIA,QAAQ,CAACI,MAAM,CAACC,MAAM,GAAK,CAAC,EAAIL,QAAQ,CAACM,IAAI,CAACC,MAAM,CAAE,CACpEd,eAAe,CAAC,CACdK,IAAI,CAAE,SAAS,CACfC,OAAO,CAAEC,QAAQ,CAACM,IAAI,CAACC,MACzB,CAAC,CAAC,CACJ,CAAC,IAAM,CACLd,eAAe,CAAC,CACdK,IAAI,CAAE,OAAO,CACbC,OAAO,CAAE,0BACX,CAAC,CAAC,CACJ,CACAR,gCAAgC,CAAC,IAAI,CAAC,CACxC,CAAC,CAED,KAAM,CAAAiB,sBAAsB,CAAIL,MAAM,EAAK,CACzCd,aAAa,CAACc,MAAM,CAAC,CACvB,CAAC,CAED,KAAM,CAAAM,OAAO,CAAG3B,UAAU,CAACwB,IAAI,CAACD,MAAM,GAAK,CAAC,CAE5C,mBACE1B,KAAA,QAAK+B,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eACzClC,IAAA,OAAIiC,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAC,cAAY,CAAI,CAAC,cACjEhC,KAAA,QAAK+B,SAAS,CAAC,yDAAyD,CAAAC,QAAA,EACrE7B,UAAU,CAACwB,IAAI,CAACD,MAAM,GAAK,CAAC,cAC3B5B,IAAA,QAAKiC,SAAS,CAAC,OAAO,CAAAC,QAAA,cACpBlC,IAAA,SAAMiC,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAC,iCAEvC,CAAM,CAAC,CACJ,CAAC,cAENlC,IAAA,CAACP,eAAe,EACd0C,aAAa,CAAE9B,UAAU,CAAC+B,QAAQ,CAACD,aAAc,CACjDE,YAAY,CAAEhC,UAAU,CAAC+B,QAAQ,CAACE,YAAa,CAC/CC,UAAU,CAAElC,UAAU,CAAC+B,QAAQ,CAACG,UAAW,CAC5C,CACF,CACA1B,6BAA6B,CAAG,IAAI,cACnCb,IAAA,CAACN,mBAAmB,EAClBe,UAAU,CAAEA,UAAW,CACvBuB,OAAO,CAAEA,OAAQ,CACjBf,YAAY,CAAEA,YAAa,CAC3BN,UAAU,CAAEA,UAAW,CACvBS,kBAAkB,CAAEA,kBAAmB,CACvCW,sBAAsB,CAAEA,sBAAuB,CAChD,CACF,EACE,CAAC,CACLhB,YAAY,eACXf,IAAA,CAACJ,KAAK,EACJyB,IAAI,CAAEN,YAAY,CAACM,IAAK,CACxBC,OAAO,CAAEP,YAAY,CAACO,OAAQ,CAC9BkB,YAAY,CAAErB,iBAAkB,CACjC,CACF,cACDnB,IAAA,QAAAkC,QAAA,CACG7B,UAAU,CAACoC,SAAS,cACnBzC,IAAA,CAACF,MAAM,EAAC4C,MAAM,CAAE,OAAQ,CAAE,CAAC,cAE3B1C,IAAA,QAAAkC,QAAA,CACG7B,UAAU,CAACwB,IAAI,CAACc,GAAG,CAAC,CAACjB,MAAM,CAAEkB,KAAK,gBACjC5C,IAAA,CAACV,MAAM,EAELuD,YAAY,CAAEnB,MAAM,CAACmB,YAAa,CAClCC,UAAU,CAAEpB,MAAM,CAACqB,IAAK,CACxBrB,MAAM,CAAEA,MAAM,CAACA,MAAO,CACtBD,MAAM,CAAEC,MAAM,CAACD,MAAO,CACtBuB,QAAQ,CAAEtB,MAAM,CAACsB,QAAS,EALrBJ,KAMN,CACF,CAAC,CACC,CACN,CACE,CAAC,CACLvC,UAAU,CAACwB,IAAI,CAACD,MAAM,CAAG,CAAC,eACzB5B,IAAA,CAACH,oBAAoB,EACnBoD,WAAW,CAAE5C,UAAU,CAAC6C,UAAU,CAACD,WAAY,CAC/CE,UAAU,CAAE9C,UAAU,CAAC6C,UAAU,CAACC,UAAW,CAC7C7C,gBAAgB,CAAEA,gBAAiB,CACnCC,wBAAwB,CAAEA,wBAAyB,CACnDC,oBAAoB,CAAEA,oBAAqB,CAC5C,CACF,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAL,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}