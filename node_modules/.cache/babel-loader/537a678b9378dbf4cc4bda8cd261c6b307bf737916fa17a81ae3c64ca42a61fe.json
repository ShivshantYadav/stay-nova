{"ast":null,"code":"import _objectSpread from\"E:/STAY-NOVA/stay-nova/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState}from'react';import{Link}from'react-router-dom';import{networkAdapter}from'services/NetworkAdapter';import React,{useContext}from'react';import{AuthContext}from'contexts/AuthContext';import{useNavigate}from'react-router-dom';import validations from'utils/validations';import Toast from'components/ux/toast/Toast';import{LOGIN_MESSAGES}from'utils/constants';/**\n * Login Component\n * Renders a login form allowing users to sign in to their account.\n * It handles user input for email and password, submits login credentials to the server,\n * and navigates the user to their profile upon successful authentication.\n * Displays an error message for invalid login attempts.\n */import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Login=()=>{const navigate=useNavigate();const context=useContext(AuthContext);const[loginData,setLoginData]=useState({email:'',password:''});const[errorMessage,setErrorMessage]=useState(false);/**\n   * Handles input changes for the login form fields.\n   * Updates the loginData state with the field values.\n   * @param {Object} e - The event object from the input field.\n   */const handleInputChange=e=>{setLoginData(_objectSpread(_objectSpread({},loginData),{},{[e.target.name]:e.target.value}));};/**\n   * Handles the submission of the login form.\n   * Attempts to authenticate the user with the provided credentials.\n   * Navigates to the user profile on successful login or sets an error message on failure.\n   * @param {Object} e - The event object from the form submission.\n   */const handleLoginSubmit=async e=>{e.preventDefault();if(validations.validate('email',loginData.email)){const response=await networkAdapter.post('api/users/login',loginData);if(response&&response.data.token){context.triggerAuthCheck();navigate('/user-profile');}else if(response&&response.errors.length>0){setErrorMessage(response.errors[0]);}}else{setErrorMessage(LOGIN_MESSAGES.FAILED);}};/**\n   * Clears the current error message displayed to the user.\n   */const dismissError=()=>{setErrorMessage('');};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"login__form\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto p-4 flex justify-center min-h-[600px] items-center\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLoginSubmit,className:\"w-full max-w-lg p-4 md:p-10 shadow-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-10\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-extrabold text-brand\",children:\"Welcome Back\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Log in to continue to your account\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",value:loginData.email,onChange:handleInputChange,autoComplete:\"username\",className:\"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",value:loginData.password,onChange:handleInputChange,autoComplete:\"current-password\",className:\"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white\"})}),errorMessage&&/*#__PURE__*/_jsx(Toast,{type:\"error\",message:errorMessage,dismissError:dismissError}),/*#__PURE__*/_jsxs(\"div\",{className:\"items-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-brand hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full\",children:\"Log In\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap justify-center my-3 w-full\",children:/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",className:\"inline-block align-baseline text-md text-gray-500 hover:text-blue-800 text-right\",children:\"Forgot your password?\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"relative\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"absolute left-0 right-0 flex justify-center items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-t w-full absolute\"}),/*#__PURE__*/_jsx(\"span\",{className:\"bg-white px-3 text-gray-500 z-10\",children:\"New to Stay Booker?\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap justify-center my-3 w-full mt-12\",children:/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"inline-block align-baseline font-medium text-md text-brand hover:text-blue-800 text-right\",children:\"Create an account\"})})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-50 flex flex-col mx-auto w-full max-w-lg px-4\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-slate-600\",children:\"test user details\"}),/*#__PURE__*/_jsx(\"small\",{className:\"text-slate-600\",children:\"Email: user1@example.com\"}),/*#__PURE__*/_jsx(\"small\",{className:\"text-slate-600\",children:\"Password: password1\"})]})]});};export default Login;","map":{"version":3,"names":["useState","Link","networkAdapter","React","useContext","AuthContext","useNavigate","validations","Toast","LOGIN_MESSAGES","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","navigate","context","loginData","setLoginData","email","password","errorMessage","setErrorMessage","handleInputChange","e","_objectSpread","target","name","value","handleLoginSubmit","preventDefault","validate","response","post","data","token","triggerAuthCheck","errors","length","FAILED","dismissError","children","className","onSubmit","type","placeholder","onChange","autoComplete","message","to"],"sources":["E:/STAY-NOVA/stay-nova/src/routes/login/Login.jsx"],"sourcesContent":["import { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { networkAdapter } from 'services/NetworkAdapter';\nimport React, { useContext } from 'react';\nimport { AuthContext } from 'contexts/AuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport validations from 'utils/validations';\nimport Toast from 'components/ux/toast/Toast';\nimport { LOGIN_MESSAGES } from 'utils/constants';\n\n/**\n * Login Component\n * Renders a login form allowing users to sign in to their account.\n * It handles user input for email and password, submits login credentials to the server,\n * and navigates the user to their profile upon successful authentication.\n * Displays an error message for invalid login attempts.\n */\nconst Login = () => {\n  const navigate = useNavigate();\n  const context = useContext(AuthContext);\n  const [loginData, setLoginData] = useState({\n    email: '',\n    password: '',\n  });\n\n  const [errorMessage, setErrorMessage] = useState(false);\n\n  /**\n   * Handles input changes for the login form fields.\n   * Updates the loginData state with the field values.\n   * @param {Object} e - The event object from the input field.\n   */\n  const handleInputChange = (e) => {\n    setLoginData({ ...loginData, [e.target.name]: e.target.value });\n  };\n\n  /**\n   * Handles the submission of the login form.\n   * Attempts to authenticate the user with the provided credentials.\n   * Navigates to the user profile on successful login or sets an error message on failure.\n   * @param {Object} e - The event object from the form submission.\n   */\n  const handleLoginSubmit = async (e) => {\n    e.preventDefault();\n\n    if (validations.validate('email', loginData.email)) {\n      const response = await networkAdapter.post('api/users/login', loginData);\n      if (response && response.data.token) {\n        context.triggerAuthCheck();\n        navigate('/user-profile');\n      } else if (response && response.errors.length > 0) {\n        setErrorMessage(response.errors[0]);\n      }\n    } else {\n      setErrorMessage(LOGIN_MESSAGES.FAILED);\n    }\n  };\n\n  /**\n   * Clears the current error message displayed to the user.\n   */\n  const dismissError = () => {\n    setErrorMessage('');\n  };\n\n  return (\n    <>\n      <div className=\"login__form\">\n        <div className=\"container mx-auto p-4 flex justify-center min-h-[600px] items-center\">\n          <form\n            onSubmit={handleLoginSubmit}\n            className=\"w-full max-w-lg p-4 md:p-10 shadow-md\"\n          >\n            <div className=\"text-center mb-10\">\n              <h2 className=\"text-3xl font-extrabold text-brand\">\n                Welcome Back\n              </h2>\n              <p className=\"text-gray-500\">\n                Log in to continue to your account\n              </p>\n            </div>\n            <div className=\"mb-6\">\n              <input\n                type=\"email\"\n                name=\"email\"\n                placeholder=\"Email\"\n                value={loginData.email}\n                onChange={handleInputChange}\n                autoComplete=\"username\"\n                className=\"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white\"\n              />\n            </div>\n            <div className=\"mb-6\">\n              <input\n                type=\"password\"\n                name=\"password\"\n                placeholder=\"Password\"\n                value={loginData.password}\n                onChange={handleInputChange}\n                autoComplete=\"current-password\"\n                className=\"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white\"\n              />\n            </div>\n            {errorMessage && (\n              <Toast\n                type=\"error\"\n                message={errorMessage}\n                dismissError={dismissError}\n              />\n            )}\n            <div className=\"items-center\">\n              <div>\n                <button\n                  type=\"submit\"\n                  className=\"bg-brand hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full\"\n                >\n                  Log In\n                </button>\n              </div>\n              <div className=\"flex flex-wrap justify-center my-3 w-full\">\n                <Link\n                  to=\"/forgot-password\"\n                  className=\"inline-block align-baseline text-md text-gray-500 hover:text-blue-800 text-right\"\n                >\n                  Forgot your password?\n                </Link>\n              </div>\n              <div className=\"relative\">\n                <div className=\"absolute left-0 right-0 flex justify-center items-center\">\n                  <div className=\"border-t w-full absolute\"></div>\n                  <span className=\"bg-white px-3 text-gray-500 z-10\">\n                    New to Stay Booker?\n                  </span>\n                </div>\n              </div>\n              <div className=\"flex flex-wrap justify-center my-3 w-full mt-12\">\n                <Link\n                  to=\"/register\"\n                  className=\"inline-block align-baseline font-medium text-md text-brand hover:text-blue-800 text-right\"\n                >\n                  Create an account\n                </Link>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n      <div className=\"bg-slate-50 flex flex-col mx-auto w-full max-w-lg px-4\">\n        <small className=\"text-slate-600\">test user details</small>\n        <small className=\"text-slate-600\">Email: user1@example.com</small>\n        <small className=\"text-slate-600\">Password: password1</small>\n      </div>\n    </>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}